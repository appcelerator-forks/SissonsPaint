function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(){var e=Titanium.UI.createOptionDialog({title:"Choose an image source...",options:["Camera","Photo Gallery","Cancel"],cancel:2});e.addEventListener("click",function(e){0==e.index?Titanium.Media.showCamera({success:function(e){var t=e.media;e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&Ti.App.Properties.setString("colour_picker_image",t.nativePath)},cancel:function(){},error:function(e){var t=Titanium.UI.createAlertDialog({title:"Camera"});t.setMessage(e.code==Titanium.Media.NO_CAMERA?"Device does not have camera":"Unexpected error: "+e.code),t.show()},allowImageEditing:!0,saveToPhotoGallery:!0}):1==e.index&&Titanium.Media.openPhotoGallery({success:function(e){var t=e.media;e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&(Ti.App.Properties.setString("colour_picker_image",t.nativePath),Ti.App.fireEvent("web:loadImage",{image:t.nativePath}))},cancel:function(){}})}),e.show()}function t(){l.colorSelection.visible?l.colorSelection.hide():l.colorSelection.show()}function i(){console.log(y.length);for(var e=Titanium.UI.createView({layout:"horizontal",bottom:10,height:40,width:"100%"}),t=0;t<y.length;t++)for(var i=Math.floor(Math.random()*y.length),o=v.getCategoryColourByCategory(y[i].id),r=0;r<o.length;r++){var n=I.getColourById(o[r].colour_id),s=l.UI.create("View",{backgroundColor:"rgb("+n.rgb+")",borderColor:"#A5A5A5",borderWidth:1,width:"40",height:"40",left:"5",right:"5"}),_=v.getCateByColourId(n.id),d=p.getCategoryById(_.cate_id,"2");a(s,n,d),e.add(s)}l.recommendView.add(e)}function o(){removeAllChildren(l.scrollView);for(var e=Titanium.UI.createView({layout:"horizontal",height:40,width:"100%"}),t=0;t<w.length;t++){console.log(w[t]);var i=l.UI.create("View",{backgroundColor:"rgb("+w[t].rgb+")",borderColor:"#A5A5A5",borderWidth:1,width:"40",height:"40",left:"5",right:"5"});e.add(i);var o=v.getCateByColourId(w[t].id),r=p.getCategoryById(o.cate_id,"2");a(i,w[t],r)}l.loadingBar.opacity="0",l.loadingBar.height="0",l.loadingBar.top="0",l.scrollView.add(e),l.colorSelection.show()}function r(){var e=Ti.Filesystem.getFile("file:///storage/sdcard0/Pictures/Survival Wallpaper/1380785291867.jpg"),t=e.read(),i={message:"Sissons Paints Omnicolor",picture:t};d.requestWithGraphPath("me/photos",i,"POST",function(e){alert(e.success&&e.result?"Success : "+e.result:e.error?e.error:"cancel")})}function a(e,t,i){e.addEventListener("click",function(){Ti.App.Properties.setString("from","colourPicker");var e=Alloy.createController("colourDetails",{colour_details:t,details:i}).getView();e.open()})}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="colourPicker",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var l=this,n={},s={};l.__views.colourPicker=Ti.UI.createView({backgroundColor:"white",id:"colourPicker"}),l.__views.colourPicker&&l.addTopLevelView(l.__views.colourPicker),l.__views.toggle=Ti.UI.createView({layout:"horizontal",id:"toggle",top:"0",height:"80"}),l.__views.colourPicker.add(l.__views.toggle),l.__views.__alloyId40=Alloy.createController("toggle",{id:"__alloyId40",__parentSymbol:l.__views.toggle}),l.__views.__alloyId40.setParent(l.__views.toggle),l.__views.__alloyId41=Ti.UI.createLabel({width:"75%",height:"80",color:"black",font:{fontSize:22},text:"Colour Picker",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,id:"__alloyId41"}),l.__views.toggle.add(l.__views.__alloyId41),l.__views.canvas=Ti.UI.createWebView({id:"canvas",url:"/html/colour_picker.html",top:"80",height:"80%",enableZoomControls:"false",overScrollMode:Titanium.UI.Android.OVER_SCROLL_NEVER,disableBounce:"true"}),l.__views.colourPicker.add(l.__views.canvas),l.__views.loadingBar=Ti.UI.createView({layout:"vertical",id:"loadingBar",height:"0",width:"120",borderRadius:"15",top:"0",opacity:"1",backgroundColor:"#2E2E2E"}),l.__views.colourPicker.add(l.__views.loadingBar),l.__views.activityIndicator=Ti.UI.createActivityIndicator({style:Ti.UI.ActivityIndicatorStyle.BIG,top:15,left:30,width:60,id:"activityIndicator"}),l.__views.loadingBar.add(l.__views.activityIndicator),l.__views.__alloyId42=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"#ffffff",text:"Loading",id:"__alloyId42"}),l.__views.loadingBar.add(l.__views.__alloyId42),l.__views.colorSelection=Ti.UI.createView({layout:"vertical",height:"35%",bottom:"60",id:"colorSelection"}),l.__views.colourPicker.add(l.__views.colorSelection),l.__views.__alloyId43=Ti.UI.createImageView({image:"/images/scroll_up.png",backgroundColor:"transparent",width:Titanium.UI.FILL,top:"0",id:"__alloyId43"}),l.__views.colorSelection.add(l.__views.__alloyId43),l.__views.bottomColorBar=Ti.UI.createView({id:"bottomColorBar",layout:"vertical",backgroundColor:"white"}),l.__views.colorSelection.add(l.__views.bottomColorBar),l.__views.__alloyId44=Ti.UI.createLabel({width:"90%",height:Ti.UI.SIZE,color:"black",text:"COLOURS INSPIRATION",textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,bottom:"10",backgroundColor:"white",id:"__alloyId44"}),l.__views.bottomColorBar.add(l.__views.__alloyId44),l.__views.recommendView=Ti.UI.createScrollView({id:"recommendView",backgroundColor:"white",layout:"horizontal",scrollType:"horizontal",height:"50",overScrollMode:Titanium.UI.Android.OVER_SCROLL_NEVER}),l.__views.bottomColorBar.add(l.__views.recommendView),l.__views.__alloyId45=Ti.UI.createImageView({image:"/images/scroll_up.png",backgroundColor:"white",width:Titanium.UI.FILL,id:"__alloyId45"}),l.__views.bottomColorBar.add(l.__views.__alloyId45),l.__views.__alloyId46=Ti.UI.createLabel({width:"90%",height:Ti.UI.SIZE,color:"black",text:"CLOSEST COLOUR",textAlign:Ti.UI.TEXT_ALIGNMENT_LEFT,bottom:"10",backgroundColor:"white",id:"__alloyId46"}),l.__views.bottomColorBar.add(l.__views.__alloyId46),l.__views.scrollView=Ti.UI.createScrollView({id:"scrollView",backgroundColor:"white",layout:"vertical",scrollType:"horizontal",height:"50",overScrollMode:Titanium.UI.Android.OVER_SCROLL_NEVER}),l.__views.bottomColorBar.add(l.__views.scrollView),l.__views.bottomBar=Ti.UI.createView({id:"bottomBar",bottom:"0",height:"60",width:Ti.UI.FILL,backgroundImage:"/images/tool_bar.jpg"}),l.__views.colourPicker.add(l.__views.bottomBar),l.__views.__alloyId47=Ti.UI.createView({layout:"horizontal",width:"120",id:"__alloyId47"}),l.__views.bottomBar.add(l.__views.__alloyId47),l.__views.takePhoto=Ti.UI.createImageView({image:"/images/icon_photo.png",right:"10",id:"takePhoto",width:"50",height:"40",top:"10",bottom:"10"}),l.__views.__alloyId47.add(l.__views.takePhoto),e?l.__views.takePhoto.addEventListener("click",e):s["$.__views.takePhoto!click!takePhoto"]=!0,l.__views.toggleActivation=Ti.UI.createImageView({image:"/images/btn_eyedrop.png",left:"10",id:"toggleActivation",width:"50",height:"40",top:"10",bottom:"10"}),l.__views.__alloyId47.add(l.__views.toggleActivation),t?l.__views.toggleActivation.addEventListener("click",t):s["$.__views.toggleActivation!click!toggleActivation"]=!0,n.destroy=function(){},_.extend(l,l.__views),arguments[0]||{};var d=require("facebook");d.appid=752094718209236,Ti.Platform.displayCaps.platformHeight;var c=Ti.Platform.displayCaps.platformWidth,h=PixelsToDPUnits(Ti.Platform.displayCaps.platformHeight),u=l.toggle.getHeight(),g=h-u,v=Alloy.createCollection("category_colour"),I=Alloy.createCollection("colour"),w="",p=Alloy.createCollection("category"),y=p.getCategoryListByType(1);l.colorSelection.hide(),e(),l.canvas.addEventListener("load",function(){l.colorSelection.hide(),Ti.App.fireEvent("web:initCanvasSize",{height:g,width:c})}),1==Ti.App.Properties.getString("back")&&Ti.App.Properties.setString("back",0),i();var m=function(e){l.activityIndicator.show(),l.loadingBar.opacity="1",l.loadingBar.height="120",l.loadingBar.top=PixelsToDPUnits(Ti.Platform.displayCaps.platformHeight)/2-l.loadingBar.getHeight()/2,l.colorSelection.hide(),w=I.getClosestColourList(e.r,e.g,e.b),o()};Ti.App.addEventListener("app:getColour",m),o();var T={sharer:{chooser:function(){d.loggedIn?r():(d.permissions=["publish_actions"],d.addEventListener("login",function(e){e.success&&r()}),d.authorize())}}},f="#sissons_paint",E=Ti.UI.createButton({title:"Media Share"});E.addEventListener("click",T.sharer.chooser.bind(null,f)),l.recommendView.add(E),s["$.__views.takePhoto!click!takePhoto"]&&l.__views.takePhoto.addEventListener("click",e),s["$.__views.toggleActivation!click!toggleActivation"]&&l.__views.toggleActivation.addEventListener("click",t),_.extend(l,n)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;