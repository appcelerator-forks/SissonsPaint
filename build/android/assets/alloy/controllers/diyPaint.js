function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e){return e/(Titanium.Platform.displayCaps.dpi/160)}function t(){var e=Ti.UI.createTableViewRow({title:"Bucket",width:150,left:10,touchEnabled:!0,height:60}),t=Ti.UI.createTableViewRow({title:"Brush",width:150,left:10,touchEnabled:!0,height:60}),i=Ti.UI.createTableViewRow({title:"Eraser",width:150,left:10,touchEnabled:!0,height:60}),o=[];o.push(e),o.push(t),o.push(i);var r=Titanium.UI.createTableView({separatorColor:"transparent",backgroundImage:"/images/pop_window.png",height:Ti.UI.SIZE,width:150,bottom:60,overScrollMode:Titanium.UI.Android.OVER_SCROLL_NEVER,data:o});a.diyPaint.add(r),r.addEventListener("click",function(e){console.log(e.index),0==e.index&&(w="bucket",a.slider.setValue(u),Ti.App.fireEvent("web:setStroke",{value:u}),Ti.App.fireEvent("web:changeTools",{tools:"bucket"}),a.tools.image="/images/icon_bucket.png"),1==e.index&&(w="brush",a.slider.setValue(g),Ti.App.fireEvent("web:setStroke",{value:g}),Ti.App.fireEvent("web:changeTools",{tools:"brush"}),a.tools.image="/images/icon_brush.png"),2==e.index&&(w="erase",a.slider.setValue(v),Ti.App.fireEvent("web:setStroke",{value:v}),Ti.App.fireEvent("web:changeTools",{tools:"erase"}),a.tools.image="/images/icon_erase.png"),a.diyPaint.remove(r)})}function i(e){"bucket"==w?u=parseInt(e.value):"brush"==w?g=parseInt(e.value):"erase"==w&&(v=parseInt(e.value))}function o(){var e=Titanium.UI.createOptionDialog({title:"Choose an image source...",options:["Camera","Photo Gallery","Cancel"],cancel:2});e.addEventListener("click",function(e){0==e.index?Titanium.Media.showCamera({success:function(e){var t=e.media;e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&(Ti.App.Properties.setString("image",t.nativePath),Ti.App.fireEvent("web:loadImage",{image:"image.nativePath"}))},cancel:function(){},error:function(e){var t=Titanium.UI.createAlertDialog({title:"Camera"});t.setMessage(e.code==Titanium.Media.NO_CAMERA?"Device does not have camera":"Unexpected error: "+e.code),t.show()},allowImageEditing:!0,saveToPhotoGallery:!0}):1==e.index&&(Ti.App.fireEvent("foo",{name:"bar"}),Titanium.Media.openPhotoGallery({success:function(e){var t=e.media;e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&(Ti.App.Properties.setString("image",t.nativePath),console.log(t.nativePath),Ti.App.fireEvent("web:loadImage",{image:t.nativePath}))},cancel:function(){}}))}),e.show()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="diyPaint",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var a=this,r={},l={};a.__views.diyPaint=Ti.UI.createView({id:"diyPaint"}),a.__views.diyPaint&&a.addTopLevelView(a.__views.diyPaint),a.__views.__alloyId51=Ti.UI.createView({backgroundColor:"white",id:"__alloyId51"}),a.__views.diyPaint.add(a.__views.__alloyId51),a.__views.toggle=Ti.UI.createView({id:"toggle",layout:"horizontal",height:"80",top:"0"}),a.__views.__alloyId51.add(a.__views.toggle),a.__views.__alloyId52=Alloy.createController("toggle",{id:"__alloyId52",__parentSymbol:a.__views.toggle}),a.__views.__alloyId52.setParent(a.__views.toggle),a.__views.__alloyId53=Ti.UI.createLabel({width:"75%",height:Ti.UI.SIZE,color:"black",font:{fontSize:22},text:"DIY Paint",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,id:"__alloyId53"}),a.__views.toggle.add(a.__views.__alloyId53),a.__views.canvas=Ti.UI.createWebView({id:"canvas",url:"/html/canvas-paint-bucket.html",enableZoomControls:"false",overScrollMode:Titanium.UI.Android.OVER_SCROLL_NEVER}),a.__views.__alloyId51.add(a.__views.canvas),a.__views.slider=Ti.UI.createSlider({id:"slider",bottom:"60",min:"0",max:"100",width:"100%",value:"20"}),a.__views.__alloyId51.add(a.__views.slider),i?a.__views.slider.addEventListener("change",i):l["$.__views.slider!change!updateAdjustment"]=!0,a.__views.toolbar=Ti.UI.createView({height:"60",bottom:"0",id:"toolbar"}),a.__views.__alloyId51.add(a.__views.toolbar),a.__views.__alloyId54=Ti.UI.createImageView({image:"/images/tool_bar.jpg",height:"60",width:Titanium.UI.FILL,id:"__alloyId54"}),a.__views.toolbar.add(a.__views.__alloyId54),a.__views.__alloyId55=Ti.UI.createImageView({image:"/images/icon_photo.png",left:"5",height:"40",width:"50",id:"__alloyId55"}),a.__views.toolbar.add(a.__views.__alloyId55),o?a.__views.__alloyId55.addEventListener("click",o):l["$.__views.__alloyId55!click!photoPop"]=!0,a.__views.__alloyId56=Ti.UI.createImageView({image:"/images/icon_undo.png",left:"65",height:"40",width:"50",id:"__alloyId56"}),a.__views.toolbar.add(a.__views.__alloyId56),o?a.__views.__alloyId56.addEventListener("click",o):l["$.__views.__alloyId56!click!photoPop"]=!0,a.__views.tools=Ti.UI.createImageView({id:"tools",image:"/images/icon_bucket.png",left:"125",height:"40",width:"50"}),a.__views.toolbar.add(a.__views.tools),t?a.__views.tools.addEventListener("click",t):l["$.__views.tools!click!toolspop"]=!0,a.__views.__alloyId57=Ti.UI.createImageView({image:"/images/icon_size.png",left:"185",height:"40",width:"50",id:"__alloyId57"}),a.__views.toolbar.add(a.__views.__alloyId57),o?a.__views.__alloyId57.addEventListener("click",o):l["$.__views.__alloyId57!click!photoPop"]=!0,a.__views.__alloyId58=Ti.UI.createImageView({image:"/images/icon_color.png",left:"245",height:"40",width:"50",id:"__alloyId58"}),a.__views.toolbar.add(a.__views.__alloyId58),o?a.__views.__alloyId58.addEventListener("click",o):l["$.__views.__alloyId58!click!photoPop"]=!0,a.__views.__alloyId59=Ti.UI.createImageView({image:"/images/icon_share.png",left:"305",height:"40",width:"50",id:"__alloyId59"}),a.__views.toolbar.add(a.__views.__alloyId59),o?a.__views.__alloyId59.addEventListener("click",o):l["$.__views.__alloyId59!click!photoPop"]=!0,r.destroy=function(){},_.extend(a,a.__views),arguments[0]||{};var n=Ti.Platform.displayCaps.platformWidth,s=e(Ti.Platform.displayCaps.platformHeight),d=a.toolbar.rect.height,c=a.toggle.getHeight(),h=0,u=a.slider.value,g=10,v=10,w="bucket";a.toolbar.addEventListener("postlayout",function(){d=a.toolbar.rect.height,h=s-d-25-c,console.log("page height: "+s+", toolbar:"+d+", toggle"+c+", canvas:"+h),a.canvas.setBottom(d),a.canvas.setHeight(h)}),a.canvas.addEventListener("load",function(){console.log(h),console.log(n),Ti.App.fireEvent("web:initCanvasSize",{height:h,width:n})}),l["$.__views.slider!change!updateAdjustment"]&&a.__views.slider.addEventListener("change",i),l["$.__views.__alloyId55!click!photoPop"]&&a.__views.__alloyId55.addEventListener("click",o),l["$.__views.__alloyId56!click!photoPop"]&&a.__views.__alloyId56.addEventListener("click",o),l["$.__views.tools!click!toolspop"]&&a.__views.tools.addEventListener("click",t),l["$.__views.__alloyId57!click!photoPop"]&&a.__views.__alloyId57.addEventListener("click",o),l["$.__views.__alloyId58!click!photoPop"]&&a.__views.__alloyId58.addEventListener("click",o),l["$.__views.__alloyId59!click!photoPop"]&&a.__views.__alloyId59.addEventListener("click",o),_.extend(a,r)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;