function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e){return e/(Titanium.Platform.displayCaps.dpi/160)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="diyPaint",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var t=this,i={};t.__views.diyPaint=Ti.UI.createView({id:"diyPaint"}),t.__views.diyPaint&&t.addTopLevelView(t.__views.diyPaint),t.__views.__alloyId47=Ti.UI.createView({backgroundColor:"white",id:"__alloyId47"}),t.__views.diyPaint.add(t.__views.__alloyId47),t.__views.toggle=Ti.UI.createView({backgroundColor:"yellow",id:"toggle",layout:"horizontal",height:"80",top:"0"}),t.__views.__alloyId47.add(t.__views.toggle),t.__views.__alloyId48=Alloy.createController("toggle",{id:"__alloyId48",__parentSymbol:t.__views.toggle}),t.__views.__alloyId48.setParent(t.__views.toggle),t.__views.__alloyId49=Ti.UI.createLabel({width:"75%",height:Ti.UI.SIZE,color:"black",font:{fontSize:28},text:"DIY Paint",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,id:"__alloyId49"}),t.__views.toggle.add(t.__views.__alloyId49),t.__views.canvas=Ti.UI.createWebView({backgroundColor:"h",id:"canvas",url:"/html/canvas-paint-bucket.html",enableZoomControls:"false"}),t.__views.__alloyId47.add(t.__views.canvas),t.__views.toolbar=Ti.UI.createView({height:Ti.UI.SIZE,bottom:"0",backgroundColor:"orange",id:"toolbar"}),t.__views.__alloyId47.add(t.__views.toolbar),t.__views.settings=Ti.UI.createImageView({width:"16.6%",id:"settings",mod:"settings",left:"0",image:"/images/power-icons.png"}),t.__views.toolbar.add(t.__views.settings),t.__views.settings=Ti.UI.createImageView({width:"16.6%",id:"settings",mod:"settings",left:"16.6%",image:"/images/power-icons.png"}),t.__views.toolbar.add(t.__views.settings),t.__views.settings=Ti.UI.createImageView({width:"16.6%",id:"settings",mod:"settings",left:"33.2%",image:"/images/power-icons.png"}),t.__views.toolbar.add(t.__views.settings),t.__views.settings=Ti.UI.createImageView({width:"16.6%",id:"settings",mod:"settings",left:"49.8%",image:"/images/power-icons.png"}),t.__views.toolbar.add(t.__views.settings),t.__views.settings=Ti.UI.createImageView({width:"16.6%",id:"settings",mod:"settings",left:"66.4%",image:"/images/power-icons.png"}),t.__views.toolbar.add(t.__views.settings),t.__views.settings=Ti.UI.createImageView({width:"16.6%",id:"settings",mod:"settings",left:"83%",image:"/images/power-icons.png"}),t.__views.toolbar.add(t.__views.settings),i.destroy=function(){},_.extend(t,t.__views),arguments[0]||{};var o=Ti.Platform.displayCaps.platformWidth,r=e(Ti.Platform.displayCaps.platformHeight),a=t.toolbar.rect.height,l=t.toggle.getHeight(),n=0;t.toolbar.addEventListener("postlayout",function(){a=t.toolbar.rect.height,n=r-a-25-l,console.log("page height: "+r+", toolbar:"+a+", toggle"+l+", canvas:"+n),t.canvas.setBottom(a),t.canvas.setHeight(n)}),t.canvas.addEventListener("load",function(){console.log(n),console.log(o),Ti.App.fireEvent("web:initCanvasSize",{height:n,width:o})});var s=Titanium.UI.createOptionDialog({title:"Choose an image source...",options:["Camera","Photo Gallery","Cancel"],cancel:2});s.addEventListener("click",function(e){0==e.index?Titanium.Media.showCamera({success:function(e){var t=e.media;e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&Ti.App.Properties.setString("image",t.nativePath)},cancel:function(){},error:function(e){var t=Titanium.UI.createAlertDialog({title:"Camera"});t.setMessage(e.code==Titanium.Media.NO_CAMERA?"Device does not have camera":"Unexpected error: "+e.code),t.show()},allowImageEditing:!0,saveToPhotoGallery:!0}):1==e.index&&Titanium.Media.openPhotoGallery({success:function(e){var t=e.media;e.mediaType==Ti.Media.MEDIA_TYPE_PHOTO&&(Ti.App.Properties.setString("image",t.nativePath),Ti.App.fireEvent("web:loadImage",{image:t.nativePath}))},cancel:function(){}})}),s.show(),_.extend(t,i)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;