function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e,t,i,r,o,n){e.addEventListener("click",function(){var s=Titanium.UI.createProgressBar({width:"90%",height:Ti.UI.FILL,min:0,max:1,value:0,message:"",font:{fontSize:12},color:"red"}),_=e.size.height,d=e.size.width,c=Titanium.UI.createView({height:_,width:d,backgroundColor:"#A5A5A5",opacity:.5,bottom:0}),h=Ti.UI.createLabel({color:"black",font:{fontSize:8,fontWeight:"bold"},text:"",top:2,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:d,height:_});"0"==o?(r.add(c),r.add(s),r.add(h)):(r.remove(c),r.remove(s),r.remove(h)),a(i,!0,s,h,function(e){e?alert(e):(l.updateDownloadedBrochure(t),""!=n&&r.remove(n),r.remove(c),r.remove(s),r.remove(h))})})}function t(e,t,i){e.addEventListener("click",function(){s.playVideo(i)})}function i(e){for(var t=e.children.slice(0),i=0;i<t.length;++i)e.remove(t[i])}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="brochure",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var r=this,o={},n={};r.__views.brochureView=Ti.UI.createView({backgroundColor:"white",id:"brochureView",backgroundImage:"/images/wood_background.jpg"}),r.__views.brochureView&&r.addTopLevelView(r.__views.brochureView),r.__views.__alloyId15=Ti.UI.createView({layout:"vertical",id:"__alloyId15"}),r.__views.brochureView.add(r.__views.__alloyId15),r.__views.__alloyId16=Ti.UI.createView({layout:"horizontal",height:"80",id:"__alloyId16"}),r.__views.__alloyId15.add(r.__views.__alloyId16),r.__views.__alloyId17=Alloy.createController("toggle",{id:"__alloyId17",__parentSymbol:r.__views.__alloyId16}),r.__views.__alloyId17.setParent(r.__views.__alloyId16),r.__views.__alloyId18=Ti.UI.createLabel({width:"75%",height:Ti.UI.SIZE,color:"black",font:{fontSize:28},text:"Brochure",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,id:"__alloyId18"}),r.__views.__alloyId16.add(r.__views.__alloyId18),r.__views.scrollview=Ti.UI.createScrollView({id:"scrollview",layout:"vertical",overScrollMode:Titanium.UI.Android.OVER_SCROLL_NEVER}),r.__views.__alloyId15.add(r.__views.scrollview),r.__views.mainView=Ti.UI.createView({id:"mainView",layout:"vertical",height:Ti.UI.SIZE,width:"80%"}),r.__views.scrollview.add(r.__views.mainView),r.__views.__alloyId19=Ti.UI.createView({height:"60",bottom:"0",id:"__alloyId19"}),r.__views.brochureView.add(r.__views.__alloyId19),r.__views.__alloyId20=Ti.UI.createImageView({image:"/images/tool_bar.jpg",height:"60",width:Titanium.UI.FILL,id:"__alloyId20"}),r.__views.__alloyId19.add(r.__views.__alloyId20),r.__views.filterButton=Ti.UI.createImageView({id:"filterButton",image:"/images/icon_filter.png",height:"40",width:"50"}),r.__views.__alloyId19.add(r.__views.filterButton),m?r.__views.filterButton.addEventListener("click",m):n["$.__views.filterButton!click!popWindow"]=!0,o.destroy=function(){},_.extend(r,r.__views),arguments[0]||{};var a=require("pdf"),s=require("titutorial.youtubeplayer"),l=Alloy.createCollection("brochure"),d=l.getBrochureList(),c=0,h=function(){for(var i,o,n,a,s,l=0,_="",c=d.length-1,h=0;h<d.length;h++){var u=d[h].id;if(i=d[h].cover,o=Ti.UI.createImageView({image:i,bottom:0,width:90,height:"auto"}),l%3==0&&(n=r.UI.create("View",{textAlign:"center",bottom:0,layout:"vertical",height:Ti.UI.SIZE,width:"100%"}),a=Ti.UI.createImageView({image:"/images/wood_rack.png",top:0,width:"100%",right:5,left:5}),s=Titanium.UI.createView({layout:"horizontal",height:Ti.UI.SIZE,width:"100%",bottom:0,left:"5%",right:"5%"})),_=r.UI.create("View",{bottom:"0",height:Ti.UI.SIZE,width:"30%",right:5}),_.add(o),s.add(_),n.add(s),n.add(a),"pdf"==d[h].format){var p="";"0"==d[h].isDownloaded&&(p=Ti.UI.createImageView({image:"/images/icon_download.png",width:30,height:30,top:0,right:0}),_.add(p)),e(o,u,d[h].content,_,d[h].isDownloaded,p)}else t(o,u,d[h].url),playIcon=Ti.UI.createImageView({image:"/images/icon_play.png",width:40,height:40}),_.add(playIcon);(l%3==2||c==l)&&r.scrollview.add(n),l++}};h();var u=[],p=Ti.UI.createTableViewRow({title:"LATEST",width:150,left:10,touchEnabled:!0,height:60}),g=Ti.UI.createTableViewRow({title:"DOWNLOADED",width:150,left:10,touchEnabled:!0,height:60}),v=Ti.UI.createTableViewRow({title:"VIDEO",width:150,left:10,touchEnabled:!0,height:60});u.push(p),u.push(g),u.push(v);var I=Titanium.UI.createTableView({separatorColor:"transparent",backgroundImage:"/images/pop_window.png",height:Ti.UI.SIZE,width:150,bottom:60,overScrollMode:Titanium.UI.Android.OVER_SCROLL_NEVER,data:u}),f=function(e){console.log(e.index),c=0,r.brochureView.remove(I),i(r.scrollview),0==e.index?(d=l.getBrochureList(),h()):1==e.index?(d=l.getDownloadedList(),h()):(d=l.getVideoList(),h())},m=function(){console.log("popWindow"),w(),1==c?(c=0,r.brochureView.remove(I)):(c=1,r.brochureView.add(I),I.addEventListener("click",f))},w=function(){I.removeEventListener("click",f)};n["$.__views.filterButton!click!popWindow"]&&r.__views.filterButton.addEventListener("click",m),_.extend(r,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;