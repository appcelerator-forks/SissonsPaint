function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e,t,i,r,o,n){e.addEventListener("click",function(){I(e,t,i,r,o,n)})}function t(e,t,i,o,n,a){console.log(t);var h=Titanium.UI.createProgressBar({width:"90%",height:Ti.UI.FILL,min:0,max:1,value:0,message:"",font:{fontSize:12},color:"red"}),c=e.size.height,d=e.size.width,u=Titanium.UI.createView({height:c,width:d,backgroundColor:"#A5A5A5",opacity:.5,bottom:0}),_=Ti.UI.createLabel({color:"#ffffff",font:{fontSize:14,fontWeight:"bold"},text:"",top:10,width:"100%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:d,height:c}),p=Titanium.UI.createView({height:"20%",width:"80%",backgroundColor:"#525151",opacity:.8});"0"==n?(p.add(u),p.add(h),p.add(_),r.brochureView.add(p)):(p.remove(u),p.remove(h),p.remove(_),r.brochureView.remove(p)),s(i,!0,h,_,function(e){e?alert(e):(l.updateDownloadedBrochure(t),""!=a&&o.remove(a),p.remove(u),p.remove(h),p.remove(_),r.brochureView.remove(p))})}function i(e,t,i){e.addEventListener("click",function(){a.playVideo(i)})}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="brochure",arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var r=this,o={},n={};r.__views.brochureView=Ti.UI.createView({backgroundColor:"white",id:"brochureView",backgroundImage:"/images/wood_background.jpg"}),r.__views.brochureView&&r.addTopLevelView(r.__views.brochureView),r.__views.__alloyId6=Ti.UI.createView({layout:"vertical",id:"__alloyId6"}),r.__views.brochureView.add(r.__views.__alloyId6),r.__views.__alloyId7=Ti.UI.createView({layout:"horizontal",height:"80",backgroundImage:"/images/banner_brochure.jpg",id:"__alloyId7"}),r.__views.__alloyId6.add(r.__views.__alloyId7),r.__views.__alloyId8=Alloy.createController("toggle",{id:"__alloyId8",__parentSymbol:r.__views.__alloyId7}),r.__views.__alloyId8.setParent(r.__views.__alloyId7),r.__views.scrollview=Ti.UI.createScrollView({top:"15",id:"scrollview",layout:"vertical",overScrollMode:Titanium.UI.Android.OVER_SCROLL_NEVER}),r.__views.__alloyId6.add(r.__views.scrollview),r.__views.mainView=Ti.UI.createView({id:"mainView",layout:"vertical",height:Ti.UI.SIZE,width:"80%"}),r.__views.scrollview.add(r.__views.mainView),r.__views.toolbar=Ti.UI.createView({height:"60",bottom:"0",id:"toolbar",width:"100%",backgroundImage:"/images/tool_bar.jpg"}),r.__views.brochureView.add(r.__views.toolbar),r.__views.__alloyId9=Ti.UI.createView({layout:"horizontal",width:"100%",id:"__alloyId9"}),r.__views.toolbar.add(r.__views.__alloyId9),r.__views.__alloyId10=Ti.UI.createView({width:"40%",id:"__alloyId10"}),r.__views.__alloyId9.add(r.__views.__alloyId10),r.__views.__alloyId11=Ti.UI.createView({width:"20%",id:"__alloyId11"}),r.__views.__alloyId9.add(r.__views.__alloyId11),r.__views.filterButton=Ti.UI.createImageView({id:"filterButton",image:"/images/icon_filter.png",height:"40",width:"50",top:"10",bottom:"10"}),r.__views.__alloyId11.add(r.__views.filterButton),w?r.__views.filterButton.addEventListener("click",w):n["$.__views.filterButton!click!popWindow"]=!0,r.__views.__alloyId12=Ti.UI.createView({width:"40%",id:"__alloyId12"}),r.__views.__alloyId9.add(r.__views.__alloyId12),o.destroy=function(){},_.extend(r,r.__views),arguments[0]||{};var s=require("pdf"),a=require("titutorial.youtubeplayer"),l=Alloy.createCollection("brochure"),h=l.getBrochureList(),c=0,d=[];setTimeout(function(){u()},700);var u=function(){for(var t,o,n,s,a,l=0,c="",d=h.length-1,u=0;u<h.length;u++){var _=h[u].id;if(t=h[u].cover,o=Ti.UI.createImageView({image:t,backgroundImage:"/images/default_cover.jpg",bottom:0,width:90}),l%3==0&&(n=r.UI.create("View",{textAlign:"center",bottom:0,layout:"vertical",height:220,width:"100%"}),s=Ti.UI.createImageView({image:"/images/wood_rack.png",top:0,width:"100%",right:5,left:5}),a=Titanium.UI.createView({layout:"horizontal",height:Ti.UI.SIZE,width:"100%",bottom:0,left:"5%",right:"5%"})),c=r.UI.create("View",{bottom:0,height:Ti.UI.SIZE,width:"30%",right:5}),c.add(o),a.add(c),n.add(a),n.add(s),"pdf"==h[u].format){var p="";"0"==h[u].isDownloaded&&(p=Ti.UI.createImageView({image:"/images/icon_download.png",width:30,height:30,top:0,right:0}),c.add(p)),e(o,_,h[u].content,c,h[u].isDownloaded,p)}else playIcon=Ti.UI.createImageView({image:"/images/icon_play.png",width:40,height:40}),i(o,_,h[u].url),i(playIcon,_,h[u].url),c.add(playIcon);(l%3==2||d==l)&&r.scrollview.add(n),l++}},p=Ti.UI.createTableViewRow({title:"LATEST",width:150,left:10,touchEnabled:!0,height:60}),g=Ti.UI.createTableViewRow({title:"DOWNLOADED",width:150,left:10,touchEnabled:!0,height:60}),f=Ti.UI.createTableViewRow({title:"VIDEO",width:150,left:10,touchEnabled:!0,height:60});d.push(p),d.push(g),d.push(f);var m=Titanium.UI.createTableView({separatorColor:"transparent",backgroundImage:"/images/pop_window.png",height:Ti.UI.SIZE,width:150,bottom:60,overScrollMode:Titanium.UI.Android.OVER_SCROLL_NEVER,data:d}),v=function(e){c=0,r.brochureView.remove(m),removeAllChildren(r.scrollview),0==e.index?(h=l.getBrochureList(),u()):1==e.index?(h=l.getDownloadedList(),u()):(h=l.getVideoList(),u())},w=function(){y(),1==c?(c=0,r.brochureView.remove(m)):(c=1,r.brochureView.add(m),m.addEventListener("click",v))},y=function(){m.removeEventListener("click",v)},I=function(e,i,r,o,n,s){var a=Ti.UI.createAlertDialog({cancel:1,buttonNames:["Yes","Cancel"],message:"Would you like to download the brochure?",title:"Download"});a.addEventListener("click",function(a){a.index===a.source.cancel?Ti.API.info("The cancel button was clicked"):t(e,i,r,o,n,s),Ti.API.info("e.cancel: "+a.cancel),Ti.API.info("e.source.cancel: "+a.source.cancel),Ti.API.info("e.index: "+a.index)}),a.show()};n["$.__views.filterButton!click!popWindow"]&&r.__views.filterButton.addEventListener("click",w),_.extend(r,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;