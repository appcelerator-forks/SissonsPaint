var Alloy=require("alloy"),_=require("alloy/underscore")._,model,collection;exports.definition={config:{columns:{id:"INTEGER",cate_id:"TEXT",tag:"TEXT"},adapter:{type:"sql",collection_name:"category_type"}},extendModel:function(e){return _.extend(e.prototype,{}),e},extendCollection:function(e){return _.extend(e.prototype,{getCategoryTypeByCategory:function(e){var t=this,i="SELECT * FROM "+t.config.adapter.collection_name+" WHERE cate_id='"+e+"'";db=Ti.Database.open(t.config.adapter.db_name);for(var o=db.execute(i),a=[],r=0;o.isValidRow();)a[r]={id:o.fieldByName("id"),tag:o.fieldByName("tag")},o.next(),r++;return o.close(),db.close(),t.trigger("sync"),a},resetCategoryType:function(){var e=this,t="DELETE FROM "+e.config.adapter.collection_name;db=Ti.Database.open(e.config.adapter.db_name),db.execute(t),db.close(),e.trigger("sync")},getCategoryTypeByTag:function(e){var t=this,i="SELECT * FROM "+t.config.adapter.collection_name+" WHERE tag='"+e+"'";db=Ti.Database.open(t.config.adapter.db_name);for(var o=db.execute(i),a=[],r=0;o.isValidRow();)a[r]={id:o.fieldByName("id"),cate_id:o.fieldByName("cate_id"),tag:o.fieldByName("tag")},o.next(),r++;return o.close(),db.close(),t.trigger("sync"),a},selectTypeByDistinct:function(){var e=this,t="SELECT DISTINCT tag FROM "+e.config.adapter.collection_name;db=Ti.Database.open(e.config.adapter.db_name);for(var i=db.execute(t),o=[],a=0;i.isValidRow();)o[a]={tag:i.fieldByName("tag")},i.next(),a++;return i.close(),db.close(),e.trigger("sync"),o}}),e}},model=Alloy.M("category_type",exports.definition,[]),collection=Alloy.C("category_type",exports.definition,model),exports.Model=model,exports.Collection=collection;